{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WriteConcern = exports.WRITE_CONCERN_KEYS = void 0;\nexports.WRITE_CONCERN_KEYS = ['w', 'wtimeout', 'j', 'journal', 'fsync'];\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://www.mongodb.com/docs/manual/reference/write-concern/\n */\nclass WriteConcern {\n  /**\n   * Constructs a WriteConcern from the write concern properties.\n   * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n   * @param wtimeoutMS - specify a time limit to prevent write operations from blocking indefinitely\n   * @param journal - request acknowledgment that the write operation has been written to the on-disk journal\n   * @param fsync - equivalent to the j option. Is deprecated and will be removed in the next major version.\n   */\n  constructor(w, wtimeoutMS, journal, fsync) {\n    if (w != null) {\n      if (!Number.isNaN(Number(w))) {\n        this.w = Number(w);\n      } else {\n        this.w = w;\n      }\n    }\n    if (wtimeoutMS != null) {\n      this.wtimeoutMS = this.wtimeout = wtimeoutMS;\n    }\n    if (journal != null) {\n      this.journal = this.j = journal;\n    }\n    if (fsync != null) {\n      this.journal = this.j = fsync ? true : false;\n    }\n  }\n  /**\n   * Apply a write concern to a command document. Will modify and return the command.\n   */\n  static apply(command, writeConcern) {\n    const wc = {};\n    // The write concern document sent to the server has w/wtimeout/j fields.\n    if (writeConcern.w != null) wc.w = writeConcern.w;\n    if (writeConcern.wtimeoutMS != null) wc.wtimeout = writeConcern.wtimeoutMS;\n    if (writeConcern.journal != null) wc.j = writeConcern.j;\n    command.writeConcern = wc;\n    return command;\n  }\n  /** Construct a WriteConcern given an options object. */\n  static fromOptions(options, inherit) {\n    if (options == null) return undefined;\n    inherit = inherit ?? {};\n    let opts;\n    if (typeof options === 'string' || typeof options === 'number') {\n      opts = {\n        w: options\n      };\n    } else if (options instanceof WriteConcern) {\n      opts = options;\n    } else {\n      opts = options.writeConcern;\n    }\n    const parentOpts = inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n    const {\n      w = undefined,\n      wtimeout = undefined,\n      j = undefined,\n      fsync = undefined,\n      journal = undefined,\n      wtimeoutMS = undefined\n    } = {\n      ...parentOpts,\n      ...opts\n    };\n    if (w != null || wtimeout != null || wtimeoutMS != null || j != null || journal != null || fsync != null) {\n      return new WriteConcern(w, wtimeout ?? wtimeoutMS, j ?? journal, fsync);\n    }\n    return undefined;\n  }\n}\nexports.WriteConcern = WriteConcern;","map":null,"metadata":{},"sourceType":"script"}